ext.changelog = getChangelog()

private String getChangelog() {
	def outStream = new ByteArrayOutputStream()
	def changelog = ""

	try {
		exec {
			executable = "git"
			args = ["log", "--oneline", "--decorate"]
			standardOutput = outStream
		}

		changelog = outStream.toString().trim()
	}
	catch (e) {
		logger.quiet "Error while generating changelog: $e"
	}

	return changelog
}

task printChangelog(group: 'Debug', description: 'Prints the changelog for debugging purposes.') << {
	logger.quiet ext.changelog
}